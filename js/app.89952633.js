(function(){"use strict";var t={8949:function(t,e,s){var n=s(144),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("router-view")],1)},i=[],a={name:"App",data:()=>({})},r=a,l=s(3736),c=s(3453),d=s.n(c),u=s(7524),p=(0,l.Z)(r,o,i,!1,null,null,null),h=p.exports;d()(p,{VApp:u.Z});var v=s(8345),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-app-bar",{attrs:{app:"","clipped-right":"",height:"80",color:"primary",dark:""}},[s("v-img",{attrs:{src:"/logo.png","max-height":"85","max-width":"140"}}),s("v-spacer"),s("v-btn",{attrs:{color:"secondary"},on:{click:function(e){t.filterDrawer=!t.filterDrawer}}},[s("v-icon",{attrs:{color:"terciary"}},[t._v("mdi-filter")]),t._v("Filtros ")],1)],1),s("v-navigation-drawer",{attrs:{width:"400",absolute:"",clipped:"",right:""},model:{value:t.filterDrawer,callback:function(e){t.filterDrawer=e},expression:"filterDrawer"}},[s("filter-stations",{on:{stations:t.getStations,types:t.getTypes}})],1),s("v-main",{staticStyle:{height:"100vh"}},[s("div",{attrs:{id:"map-root"}}),s("v-card",{staticClass:"popup-container",attrs:{width:"600",id:"card-details"}},[s("v-card-title",{staticClass:"px-3",attrs:{id:"card-title"}},[t._v("Dados da Estação "),s("v-spacer"),s("v-btn",{attrs:{small:"",icon:"",color:"red"},on:{click:t.closePopUp}},[s("v-icon",[t._v("mdi-close")])],1)],1),s("v-card-text",{staticClass:"popup-container"},[s("v-container",{staticClass:"popup-container",attrs:{fluid:""}},[s("v-row",{staticClass:"popup-container mb-n7",attrs:{align:"center"}},[s("v-col",{staticClass:"d-flex",attrs:{cols:"3"}},[s("v-btn",{attrs:{block:"",outlined:"",color:"black"}},[s("label",[t._v("ID: ")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-id"}}),s("br")])],1),s("v-col",{attrs:{cols:"9"}},[s("v-btn",{attrs:{block:"",outlined:"",color:"black"}},[s("label",[t._v("Nome: ")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-name"}})])],1)],1),s("v-row",{staticClass:"popup-container mb-n7",attrs:{align:"center"}},[s("v-col",{attrs:{cols:"8"}},[s("v-btn",{attrs:{block:"",outlined:"",color:"black"}},[s("label",[t._v("Tipo de Estação:")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-type"}})])],1),s("v-col",{attrs:{cols:"4"}},[s("v-btn",{attrs:{block:"",outlined:"",color:"black"}},[s("label",[t._v("Lat:")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-latitude"}})])],1)],1),s("v-row",{staticClass:"popup-container mb-n7",attrs:{align:"center"}},[s("v-col",{attrs:{cols:"8"}},[s("v-btn",{attrs:{block:"",outlined:"",color:"black"}},[s("label",[t._v("Elevação: ")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-elevation"}})])],1),s("v-col",{attrs:{cols:"4"}},[s("v-btn",{attrs:{block:"",outlined:"",color:"black"}},[s("label",[t._v("Long:")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-longitude"}})])],1)],1),s("v-row",{staticClass:"popup-container mb-n7",attrs:{align:"center"}},[s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{outlined:"",color:"black",block:""}},[s("label",[t._v("Inicio de Operação:")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-start"}})])],1)],1),s("v-row",{staticClass:"popup-container mb-n7",attrs:{align:"center"}},[s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{outlined:"",color:"black",block:""}},[s("label",[t._v("Fim de Operação:")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-end"}})])],1)],1)],1)],1)],1),s("v-snackbar",{attrs:{timeout:3e3,color:"secondary"},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.attrs;return[s("v-btn",t._b({attrs:{icon:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",n,!1),[s("v-icon",{attrs:{color:"red"}},[t._v("mdi-close")])],1)]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)],1)},f=[],y=(s(8646),s(5973)),_=s(7719),g=s(2241),b=s(5743),k=s(7494),w=s(7648),Z=s(1162),S=s(3376),x=s(8300),T=s(202),C=s(1751),O=s(6293),E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),s("v-container",{attrs:{fluid:""}},[s("v-row",{staticClass:"d-flex justify-center"},[s("v-col",{attrs:{cols:"12"}},[s("v-select",{staticClass:"pt-10",attrs:{items:t.station_type_list,"return-object":"","item-text":"name",label:"Tipo de Estação",multiple:"",outlined:"",chips:"","deletable-chips":"",clearable:"","persistent-hint":"",hint:t.stations_types_selected.length+" Tipos Selecionados"},on:{change:function(e){return t.changeSelect()}},scopedSlots:t._u([{key:"prepend-item",fn:function(){return[s("v-list-item",{attrs:{ripple:""},on:{click:t.change}},[s("v-list-item-action",[s("v-icon",{attrs:{color:t.someTypes||t.allTypes?"red":"#757575"}},[t._v(t._s(t.iconTypes))])],1),s("v-list-item-content",[s("v-list-item-title",[t._v(" "+t._s(t.someTypes||t.allTypes?"REMOVER SELEÇÃO":"SELECIONAR TODOS")+" ")])],1)],1),s("v-divider")]},proxy:!0}]),model:{value:t.stations_types_selected,callback:function(e){t.stations_types_selected=e},expression:"stations_types_selected"}})],1)],1),s("v-row",{staticClass:"d-flex justify-center"},[s("v-col",{attrs:{cols:"12"}},[s("v-select",{attrs:{items:t.stations,"return-object":"","item-key":"id","item-text":"name",label:"Estações",multiple:"",outlined:"",chips:"",clearable:"","deletable-chips":"",disabled:!t.stations_types_selected.length>0,"hide-details":!t.stations_types_selected.length>0,"persistent-hint":t.stations_types_selected.length>0,hint:t.stations_selected.length+" Opções Selecionadas"},scopedSlots:t._u([{key:"prepend-item",fn:function(){return[s("v-list-item",{attrs:{ripple:""},on:{click:t.toggle}},[s("v-list-item-action",[s("v-icon",{attrs:{color:t.someStations||t.allStations?"red":"#757575"}},[t._v(t._s(t.iconStations))])],1),s("v-list-item-content",[s("v-list-item-title",[t._v(" "+t._s(t.someStations||t.allStations?"Remover Seleção":"Selecionar Todos")+" ")])],1)],1),s("v-divider")]},proxy:!0}]),model:{value:t.stations_selected,callback:function(e){t.stations_selected=e},expression:"stations_selected"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"secondary",block:""},on:{click:t.consulting}},[s("v-icon",{attrs:{left:"",dark:"",color:"terciary"}},[t._v(" mdi-magnify")]),t._v("Consultar")],1)],1)],1)],1)],1)},j=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"title"}},[s("h3",{staticClass:"pt-3"},[t._v("Filtros")])])}],I={name:"filterStations",data:()=>({station_list:[],station_type_list:[],stations_types_selected:[],stations_selected:[],geojson:void 0}),async created(){await Promise.all([this.fetchStation(),this.fetchStationType(),this.fetchFeatures()])},computed:{stations(){let t=[];if(this.stations_types_selected.length>0){for(let e in this.stations_types_selected){let s=this.station_list.filter((t=>t.station_type_id===this.stations_types_selected[e].id));for(let e in s)t.push(s[e])}return t}return[]},allTypes(){return this.stations_types_selected.length===this.station_type_list.length},someTypes(){return this.stations_types_selected.length>0&&this.stations_types_selected.length<this.station_type_list.length},emptyTypes(){return 0===this.stations_types_selected.length},iconTypes(){return this.someTypes||this.allTypes?"mdi-close-box":"mdi-checkbox-blank-outline"},allStations(){return this.stations_selected.length===this.stations.length},someStations(){return this.stations_selected.length>0&&this.stations_selected.length<this.stations.length},emptyStations(){return 0===this.stations_selected.length},iconStations(){return this.someStations||this.allStations?"mdi-close-box":"mdi-checkbox-blank-outline"}},methods:{changeSelect(){let t=[];for(let e of this.stations){let s=this.stations_selected.map((t=>t.id)).indexOf(e.id);s>-1&&t.push(e)}this.stations_selected=t},async fetchFeatures(){await fetch("https://raw.githubusercontent.com/Kyrllan/geojson/master/station_list.geojson").then((t=>t.json())).then((t=>{this.geojson=t})).catch((t=>{console.log("Looks like there was a problem: \n",t)}))},async fetchStation(){await fetch("https://raw.githubusercontent.com/Kyrllan/geojson/master/stations.json").then((t=>t.json())).then((t=>{this.station_list=t.station})).catch((t=>{console.log("Looks like there was a problem: \n",t)}))},async fetchStationType(){await fetch("https://raw.githubusercontent.com/Kyrllan/geojson/master/station_type.json").then((t=>t.json())).then((t=>{this.station_type_list=t.station_type})).catch((t=>{console.log("Looks like there was a problem: \n",t)}))},change(){this.$nextTick((()=>{this.allTypes||this.someTypes?this.stations_types_selected=[]:this.emptyTypes&&(this.stations_types_selected=this.station_type_list.slice())}))},toggle(){this.$nextTick((()=>{this.allStations||this.someStations?this.stations_selected=[]:this.emptyStations&&(this.stations_selected=this.stations.slice())}))},async consulting(){await this.fetchFeatures();let t=[];for(let e in this.geojson.features)for(let s in this.stations_selected)this.geojson.features[e].properties.id===this.stations_selected[s].id&&t.push(this.geojson.features[e]);this.geojson.features=t,this.$emit("stations",this.geojson),this.$emit("types",this.stations_types_selected)}}},V=I,L=s(680),M=s(2102),D=s(9846),B=s(1418),P=s(6428),R=s(7620),A=s(3099),F=s(2786),H=s(2877),$=s(5815),G=(0,l.Z)(V,E,j,!1,null,null,null),Y=G.exports;d()(G,{VBtn:L.Z,VCol:M.Z,VContainer:D.Z,VDivider:B.Z,VIcon:P.Z,VListItem:R.Z,VListItemAction:A.Z,VListItemContent:F.km,VListItemTitle:F.V9,VRow:H.Z,VSelect:$.Z});var N=s(7484),J=s.n(N),K={name:"App",components:{"filter-stations":Y},data:()=>({filterDrawer:!1,snackbar:!1,text:"",station_type_id:void 0,dialog:!1,types:void 0,stations:void 0,vectorGeoJSON:new w.Z,source:new S.Z,mapMark:{id:0}}),async mounted(){await this.initiateMap()},computed:{},watch:{},methods:{closePopUp(){let t=document.getElementById("card-details");t.style.visibility="hidden",t.style.display="none"},async getTypes(t){this.types=t},async getStations(t){this.stations=t,t.features.length>0?(this.source.clear(),this.source.addFeatures((new y.Z).readFeatures(t))):(this.source.clear(),this.snackbar=!0,this.text="Nenhuma estação encontrada.")},initiateMap(){var t=new S.Z,e=new w.Z({source:t}),n=new Z.Z({source:new x.Z});this.vectorGeoJSON=new w.Z({source:this.source,style:function(t,e){return[new T.ZP({image:new C.Z({scale:.9,color:"1"==t.get("station_type_id")?"#7cb5ec":"2"==t.get("station_type_id")?"#434348":"3"==t.get("station_type_id")?"#90ed7d":"4"==t.get("station_type_id")?"#f7a35c":"#8085e9",src:s(7021)})})]}});var o=new _.Z({controls:(0,b.ce)().extend([new k.Z({units:"degrees"})]),target:"map-root",layers:[n,e,this.vectorGeoJSON],view:new g.ZP({projection:"EPSG:4326",center:[-48.815011395380765,-24.650150016322684],zoom:7})}),i=document.querySelector(".popup-container"),a=new O.Z({element:i});o.addOverlay(a);let r=[{id:"1",created_at:"2020-11-30 10:43:46.687141-03",update_at:"2020-11-30 10:43:46.687162-03",name:"AGROMETEOROLOGICAL",color:"#7cb5ec"},{id:"2",created_at:"2020-11-30 10:43:46.688442-03",update_at:"2020-11-30 10:43:46.688459-03",name:"CLIMATOLÓGICO",color:"#434348"},{id:"3",created_at:"2020-11-30 10:43:46.68895-03",update_at:"2020-11-30 10:43:46.688964-03",name:"HIDROCLIMATOLÓGICO",color:"#90ed7d"},{id:"4",created_at:"2020-11-30 10:43:46.689495-03",update_at:"2020-11-30 10:43:46.689513-03",name:"HIDROMÉTRICO",color:"#f7a35c"},{id:"5",created_at:"2020-11-30 10:43:46.690113-03",update_at:"2020-11-30 10:43:46.690134-03",name:"PLUVIOMETRIC",color:"#8085e9"}];var l=document.getElementById("feature-id"),c=document.getElementById("feature-name"),d=document.getElementById("feature-latitude"),u=document.getElementById("feature-longitude"),p=document.getElementById("feature-elevation"),h=document.getElementById("feature-type"),v=document.getElementById("feature-start"),m=document.getElementById("feature-end");o.on("click",(function(t){a.setPosition(void 0),o.forEachFeatureAtPixel(t.pixel,(function(e,s){a.setPosition(t.coordinate),l.innerHTML=e.get("id"),c.innerHTML=e.get("name"),d.innerHTML=e.get("latitude"),u.innerHTML=e.get("longitude"),p.innerHTML=e.get("elevation_meters"),v.innerHTML=J()(e.get("operation_start_date")).format("DD/MM/YYYY"),m.innerHTML=J()(e.get("operation_end_date")).format("DD/MM/YYYY");for(let t in r)e.get("station_type_id")==r[t].id&&(h.innerHTML=r[t].name)}));let e=document.getElementById("card-details");e.style.visibility="visible",e.style.display="block"}))}}},U=K,q=s(426),z=s(3237),Q=s(7118),W=s(7047),X=s(7877),tt=s(8903),et=s(3202),st=s(9762),nt=(0,l.Z)(U,m,f,!1,null,null,null),ot=nt.exports;d()(nt,{VAppBar:q.Z,VBtn:L.Z,VCard:z.Z,VCardText:Q.ZB,VCardTitle:Q.EB,VCol:M.Z,VContainer:D.Z,VIcon:P.Z,VImg:W.Z,VMain:X.Z,VNavigationDrawer:tt.Z,VRow:H.Z,VSnackbar:et.Z,VSpacer:st.Z}),n.Z.use(v.Z);const it=[{path:"/",name:"home",component:ot}],at=new v.Z({mode:"history",base:"/open-layers/",routes:it});var rt=at,lt=s(9132),ct=s(4556),dt=s(5668);n.Z.use(lt.Z);var ut=new lt.Z({theme:{dark:!1,themes:{light:{primary:"#05CDDC",secondary:"#424242",terciary:"#ffe589"}}},icons:{iconfont:"mdi"},lang:{locales:{pt:dt.Z,en:ct.Z},current:"pt"}});n.Z.config.productionTip=!1,n.Z.prototype.dayjs=J(),new n.Z({router:rt,vuetify:ut,render:t=>t(h)}).$mount("#app")},7021:function(t,e,s){t.exports=s.p+"img/location_on-white-48dp.cd6f6f88.svg"}},e={};function s(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,n,o,i){if(!n){var a=1/0;for(d=0;d<t.length;d++){n=t[d][0],o=t[d][1],i=t[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(s.O).every((function(t){return s.O[t](n[l])}))?n.splice(l--,1):(r=!1,i<a&&(a=i));if(r){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[n,o,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/open-layers/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,i,a=n[0],r=n[1],l=n[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(l)var d=l(s)}for(e&&e(n);c<a.length;c++)i=a[c],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(d)},n=self["webpackChunkopenlayer"]=self["webpackChunkopenlayer"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(8949)}));n=s.O(n)})();
//# sourceMappingURL=app.89952633.js.map