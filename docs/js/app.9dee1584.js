(function(){"use strict";var t={3823:function(t,e,s){var n=s(144),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("app-bar"),s("v-main",[s("router-view")],1)],1)},a=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-app-bar",{staticClass:"d-flex justify-center align-center",attrs:{height:"90",color:"primary",dark:""}},[s("v-img",{attrs:{src:"/logo.png","max-height":"100","max-width":"160"}})],1)],1)},r=[],l=s(3736),c=s(3453),d=s.n(c),u=s(3583),p=s(7047),h={},v=(0,l.Z)(h,i,r,!1,null,null,null),m=v.exports;d()(v,{VAppBar:u.Z,VImg:p.Z});var f={name:"App",components:{AppBar:m},data:()=>({})},_=f,y=s(7524),g=s(7877),b=(0,l.Z)(_,o,a,!1,null,null,null),k=b.exports;d()(b,{VApp:y.Z,VMain:g.Z});var w=s(8345),Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-main",{staticStyle:{height:"100%"}},[s("div",{attrs:{id:"card"}},[s("filter-stations",{on:{stations:t.getStations,types:t.getTypes}})],1),s("div",{attrs:{id:"map-root"}}),s("v-card",{staticClass:"popup-container",attrs:{width:"600"}},[s("v-card-title",{attrs:{id:"card-title"}},[t._v("Dados da Estação")]),s("v-card-text",{staticClass:"popup-container"},[s("v-container",{staticClass:"popup-container",attrs:{fluid:""}},[s("v-row",{staticClass:"popup-container mb-n7",attrs:{align:"center"}},[s("v-col",{staticClass:"d-flex",attrs:{cols:"3"}},[s("v-btn",{attrs:{block:"",outlined:"",color:"black"}},[s("label",[t._v("ID: ")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-id"}}),s("br")])],1),s("v-col",{attrs:{cols:"9"}},[s("v-btn",{attrs:{block:"",outlined:"",color:"black"}},[s("label",[t._v("Nome: ")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-name"}})])],1)],1),s("v-row",{staticClass:"popup-container mb-n7",attrs:{align:"center"}},[s("v-col",{attrs:{cols:"8"}},[s("v-btn",{attrs:{block:"",outlined:"",color:"black"}},[s("label",[t._v("Tipo de Estação:")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-type"}})])],1),s("v-col",{attrs:{cols:"4"}},[s("v-btn",{attrs:{block:"",outlined:"",color:"black"}},[s("label",[t._v("Lat:")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-latitude"}})])],1)],1),s("v-row",{staticClass:"popup-container mb-n7",attrs:{align:"center"}},[s("v-col",{attrs:{cols:"8"}},[s("v-btn",{attrs:{block:"",outlined:"",color:"black"}},[s("label",[t._v("Elevação: ")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-elevation"}})])],1),s("v-col",{attrs:{cols:"4"}},[s("v-btn",{attrs:{block:"",outlined:"",color:"black"}},[s("label",[t._v("Long:")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-longitude"}})])],1)],1),s("v-row",{staticClass:"popup-container mb-n7",attrs:{align:"center"}},[s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{outlined:"",color:"black",block:""}},[s("label",[t._v("Inicio de Operação:")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-start"}})])],1)],1),s("v-row",{staticClass:"popup-container mb-n7",attrs:{align:"center"}},[s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{outlined:"",color:"black",block:""}},[s("label",[t._v("Fim de Operação:")]),s("strong",{staticClass:"overlay-text",attrs:{id:"feature-end"}})])],1)],1)],1)],1)],1),s("v-snackbar",{attrs:{timeout:3e3,color:"secondary",right:""},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.attrs;return[s("v-btn",t._b({attrs:{icon:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",n,!1),[s("v-icon",{attrs:{color:"red"}},[t._v("mdi-close")])],1)]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},x=[],T=(s(8646),s(5973)),C=s(7719),S=s(2241),O=s(5743),j=s(7494),E=s(7648),V=s(1162),I=s(3376),L=s(8300),M=s(202),B=s(1751),A=s(6293),D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"filter"}},[s("v-card",{attrs:{width:"500"}},[s("v-card-title",{attrs:{id:"card-title"}},[t._v("Filtros")]),s("v-card-text",{staticClass:"d-flex justify-center align-center"},[s("v-container",{attrs:{fluid:""}},[s("v-row",{staticClass:"d-flex justify-center"},[s("v-col",{attrs:{cols:"12"}},[s("v-select",{staticClass:"pt-10",attrs:{items:t.station_type_list,"return-object":"","item-text":"name",label:"Tipo de Estação",multiple:"",outlined:"",chips:"","deletable-chips":"",clearable:"","persistent-hint":"",hint:t.stations_types_selected.length+" Tipos Selecionados"},scopedSlots:t._u([{key:"prepend-item",fn:function(){return[s("v-list-item",{attrs:{ripple:""},on:{click:t.change}},[s("v-list-item-action",[s("v-icon",{attrs:{color:t.someTypes||t.allTypes?"red":"#757575"}},[t._v(t._s(t.iconTypes))])],1),s("v-list-item-content",[s("v-list-item-title",[t._v(" "+t._s(t.someTypes||t.allTypes?"REMOVER SELEÇÃO":"SELECIONAR TODOS")+" ")])],1)],1),s("v-divider")]},proxy:!0}]),model:{value:t.stations_types_selected,callback:function(e){t.stations_types_selected=e},expression:"stations_types_selected"}})],1)],1),s("v-row",{staticClass:"d-flex justify-center"},[s("v-col",{attrs:{cols:"12"}},[s("v-select",{attrs:{items:t.stations,"return-object":"","item-key":"id","item-text":"name",label:"Estações",multiple:"",outlined:"",chips:"",clearable:"","deletable-chips":"",disabled:!t.stations_types_selected.length>0,"hide-details":!t.stations_types_selected.length>0,"persistent-hint":t.stations_types_selected.length>0,hint:t.stations_selected.length+" Opções Selecionadas"},scopedSlots:t._u([{key:"prepend-item",fn:function(){return[s("v-list-item",{attrs:{ripple:""},on:{click:t.toggle}},[s("v-list-item-action",[s("v-icon",{attrs:{color:t.someStations||t.allStations?"red":"#757575"}},[t._v(t._s(t.iconStations))])],1),s("v-list-item-content",[s("v-list-item-title",[t._v(" "+t._s(t.someStations||t.allStations?"Remover Seleção":"Selecionar Todos")+" ")])],1)],1),s("v-divider")]},proxy:!0}]),model:{value:t.stations_selected,callback:function(e){t.stations_selected=e},expression:"stations_selected"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"secondary",block:""},on:{click:t.consulting}},[s("v-icon",{attrs:{left:"",dark:"",color:"terciary"}},[t._v(" mdi-magnify")]),t._v("Consultar")],1)],1)],1)],1)],1)],1)],1)},P=[],R={name:"filterStations",data:()=>({station_list:[],station_type_list:[],stations_types_selected:[],stations_selected:[],geojson:void 0}),async created(){await Promise.all([this.fetchStation(),this.fetchStationType(),this.fetchFeatures()])},computed:{stations(){let t=[];if(this.stations_types_selected.length>0){for(let e in this.stations_types_selected){let s=this.station_list.filter((t=>t.station_type_id===this.stations_types_selected[e].id));for(let e in s)t.push(s[e])}return t}return[]},allTypes(){return this.stations_types_selected.length===this.station_type_list.length},someTypes(){return this.stations_types_selected.length>0&&this.stations_types_selected.length<this.station_type_list.length},emptyTypes(){return 0===this.stations_types_selected.length},iconTypes(){return this.someTypes||this.allTypes?"mdi-close-box":"mdi-checkbox-blank-outline"},allStations(){return this.stations_selected.length===this.stations.length},someStations(){return this.stations_selected.length>0&&this.stations_selected.length<this.stations.length},emptyStations(){return 0===this.stations_selected.length},iconStations(){return this.someStations||this.allStations?"mdi-close-box":"mdi-checkbox-blank-outline"}},methods:{async fetchFeatures(){await fetch("https://raw.githubusercontent.com/Kyrllan/geojson/master/station_list.geojson").then((t=>t.json())).then((t=>{this.geojson=t})).catch((t=>{console.log("Looks like there was a problem: \n",t)}))},async fetchStation(){await fetch("https://raw.githubusercontent.com/Kyrllan/geojson/master/stations.json").then((t=>t.json())).then((t=>{this.station_list=t.station})).catch((t=>{console.log("Looks like there was a problem: \n",t)}))},async fetchStationType(){await fetch("https://raw.githubusercontent.com/Kyrllan/geojson/master/station_type.json").then((t=>t.json())).then((t=>{this.station_type_list=t.station_type})).catch((t=>{console.log("Looks like there was a problem: \n",t)}))},change(){this.$nextTick((()=>{this.allTypes||this.someTypes?this.stations_types_selected=[]:this.emptyTypes&&(this.stations_types_selected=this.station_type_list.slice())}))},toggle(){this.$nextTick((()=>{this.allStations||this.someStations?this.stations_selected=[]:this.emptyStations&&(this.stations_selected=this.stations.slice())}))},async consulting(){await this.fetchFeatures();let t=[];for(let e in this.geojson.features)for(let s in this.stations_selected)this.geojson.features[e].properties.id===this.stations_selected[s].id&&t.push(this.geojson.features[e]);this.geojson.features=t,this.$emit("stations",this.geojson),this.$emit("types",this.stations_types_selected)}}},H=R,F=s(680),$=s(3237),G=s(7118),Y=s(2102),N=s(247),J=s(1418),K=s(6428),q=s(7620),z=s(3099),U=s(2786),Q=s(2877),W=s(8763),X=(0,l.Z)(H,D,P,!1,null,null,null),tt=X.exports;d()(X,{VBtn:F.Z,VCard:$.Z,VCardText:G.ZB,VCardTitle:G.EB,VCol:Y.Z,VContainer:N.Z,VDivider:J.Z,VIcon:K.Z,VListItem:q.Z,VListItemAction:z.Z,VListItemContent:U.km,VListItemTitle:U.V9,VRow:Q.Z,VSelect:W.Z});var et=s(7484),st=s.n(et),nt={name:"App",components:{"filter-stations":tt},data:()=>({snackbar:!1,text:"",station_type_id:void 0,dialog:!1,types:void 0,stations:void 0,vectorGeoJSON:new E.Z,source:new I.Z,mapMark:{id:0}}),async mounted(){await this.initiateMap()},computed:{},watch:{},methods:{async getTypes(t){this.types=t},async getStations(t){this.stations=t,t.features.length>0?(this.source.clear(),this.source.addFeatures((new T.Z).readFeatures(t))):(this.source.clear(),this.snackbar=!0,this.text="Nenhuma estação encontrada.")},initiateMap(){var t=new I.Z,e=new E.Z({source:t}),n=new V.Z({source:new L.Z});this.vectorGeoJSON=new E.Z({source:this.source,style:function(t,e){return[new M.ZP({image:new B.Z({scale:.9,color:"1"==t.get("station_type_id")?"#7cb5ec":"2"==t.get("station_type_id")?"#434348":"3"==t.get("station_type_id")?"#90ed7d":"4"==t.get("station_type_id")?"#f7a35c":"#8085e9",src:s(7021)})})]}});var o=new C.Z({controls:(0,O.ce)().extend([new j.Z({units:"degrees"})]),target:"map-root",layers:[n,e,this.vectorGeoJSON],view:new S.ZP({projection:"EPSG:4326",center:[-48.815011395380765,-24.650150016322684],zoom:7})}),a=document.querySelector(".popup-container"),i=new A.Z({element:a});o.addOverlay(i);let r=[{id:"1",created_at:"2020-11-30 10:43:46.687141-03",update_at:"2020-11-30 10:43:46.687162-03",name:"AGROMETEOROLOGICAL",color:"#7cb5ec"},{id:"2",created_at:"2020-11-30 10:43:46.688442-03",update_at:"2020-11-30 10:43:46.688459-03",name:"CLIMATOLÓGICO",color:"#434348"},{id:"3",created_at:"2020-11-30 10:43:46.68895-03",update_at:"2020-11-30 10:43:46.688964-03",name:"HIDROCLIMATOLÓGICO",color:"#90ed7d"},{id:"4",created_at:"2020-11-30 10:43:46.689495-03",update_at:"2020-11-30 10:43:46.689513-03",name:"HIDROMÉTRICO",color:"#f7a35c"},{id:"5",created_at:"2020-11-30 10:43:46.690113-03",update_at:"2020-11-30 10:43:46.690134-03",name:"PLUVIOMETRIC",color:"#8085e9"}];var l=document.getElementById("feature-id"),c=document.getElementById("feature-name"),d=document.getElementById("feature-latitude"),u=document.getElementById("feature-longitude"),p=document.getElementById("feature-elevation"),h=document.getElementById("feature-type"),v=document.getElementById("feature-start"),m=document.getElementById("feature-end");o.on("click",(function(t){i.setPosition(void 0),o.forEachFeatureAtPixel(t.pixel,(function(e,s){i.setPosition(t.coordinate),l.innerHTML=e.get("id"),c.innerHTML=e.get("name"),d.innerHTML=e.get("latitude"),u.innerHTML=e.get("longitude"),p.innerHTML=e.get("elevation_meters"),v.innerHTML=st()(e.get("operation_start_date")).format("DD/MM/YYYY"),m.innerHTML=st()(e.get("operation_end_date")).format("DD/MM/YYYY");for(let t in r)e.get("station_type_id")==r[t].id&&(h.innerHTML=r[t].name)}))}))}}},ot=nt,at=s(3202),it=(0,l.Z)(ot,Z,x,!1,null,null,null),rt=it.exports;d()(it,{VBtn:F.Z,VCard:$.Z,VCardText:G.ZB,VCardTitle:G.EB,VCol:Y.Z,VContainer:N.Z,VIcon:K.Z,VMain:g.Z,VRow:Q.Z,VSnackbar:at.Z}),n.Z.use(w.Z);const lt=[{path:"/",name:"home",component:rt}],ct=new w.Z({mode:"history",base:"/",routes:lt});var dt=ct,ut=s(9132),pt=s(4556),ht=s(5668);n.Z.use(ut.Z);var vt=new ut.Z({theme:{dark:!1,themes:{light:{primary:"#05CDDC",secondary:"#424242",terciary:"#ffe589"}}},icons:{iconfont:"mdi"},lang:{locales:{pt:ht.Z,en:pt.Z},current:"pt"}});n.Z.config.productionTip=!1,n.Z.prototype.dayjs=st(),new n.Z({router:dt,vuetify:vt,render:t=>t(k)}).$mount("#app")},7021:function(t,e,s){t.exports=s.p+"img/location_on-white-48dp.cd6f6f88.svg"}},e={};function s(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,s),a.exports}s.m=t,function(){var t=[];s.O=function(e,n,o,a){if(!n){var i=1/0;for(d=0;d<t.length;d++){n=t[d][0],o=t[d][1],a=t[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(s.O).every((function(t){return s.O[t](n[l])}))?n.splice(l--,1):(r=!1,a<i&&(i=a));if(r){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[n,o,a]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,a,i=n[0],r=n[1],l=n[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(l)var d=l(s)}for(e&&e(n);c<i.length;c++)a=i[c],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(d)},n=self["webpackChunkopenlayer"]=self["webpackChunkopenlayer"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(3823)}));n=s.O(n)})();
//# sourceMappingURL=app.9dee1584.js.map